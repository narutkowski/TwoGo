<!DOCTYPE html>
<html>
<head>
	<title>2Go</title>
	<meta name="viewport" content="width=device-width">
	
	
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/map.css" >
    <link rel="stylesheet" href="css/normalize.css"/>
    
    <script src="js/jquery-1.9.1.js" type="text/javascript" id="jquery"></script>
    <script src="js/jquery-migrate-1.1.1.min.js"></script>
    <script src="js/modernizr-2.6.2.min.js"></script>
    <script src="js/main.js"></script>
  	<script src="js/jqm-config.js"></script>
	    
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCsnTb7dm7LTkqgVE1JI0i5PL9Vwz6ww5M&sensor=false"></script>
    <script src="js/jquery.ba-bbq.js"></script>
	<script src="js/jquery.ba-hashchange.min.js"></script>
	

<script type="text/javascript">
	function ToDo(apiKey, authUrl, apiUrl) {
  		this.foursquare = new Foursquare(apiKey, authUrl, apiUrl);

  	}
  	
  	ToDo.prototype.run = function (){
	  	this.foursquare.todos(bind(this.onTodos, this));
  	}
  	
  	var venue;
  	ToDo.prototype.onTodos = function(incomingTodos) {
	  	
	  	venue = new PlaceCollection ();
		
		for (var i=0; i < incomingTodos.items.length; i++){
		var place = new Place({name: incomingTodos.items[i].venue['name'], address: incomingTodos.items[i].venue.location['address'], city: incomingTodos.items[i].venue.location['city'], state: incomingTodos.items[i].venue.location['state'], lat: incomingTodos.items[i].venue.location['lat'], lng: incomingTodos.items[i].venue.location['lng']});
		
		venue.add(place);		  
		}
		//console.log(venue);

		  for(var i=0; i < venue.models.length; i++){
		  $('#list').append('<li><a href="#venues/' + encodeURI(venue.models[i].attributes.name)  + '">' + venue.models[i].attributes.name + '</a></li>').listview('refresh');

		  }

		  return venue;
		  venueDetails(venue);
	 }
	 
	 

function venueDetails(name){
	Name = name;
	var page2 = new Page2View({collection: Name});
	
	
	//console.log(Name);
}
	 $(function (){
	  	new ToDo('LCK4JYTLPF5CZN0SPYVWD3MEFP52NXOD4GMLETS24YM0WC32', 'https://foursquare.com/', 'https://api.foursquare.com/').run();
	  	
	  	
  	});
  	</script>
   
</head>

<body>


	<script type="text/javascript">
		</script> 
	
	<!--Templates -->
	<script type="text/template" id="home"> 
	
		<div data-role="header">
            <img src="img/TwoGo_banner.png" id="banner" />
        </div>

        <div data-role="content">

        <ul data-role="listview" data-inset="true" class="ui-icon-alt" id="list">
    </ul>
            

            </ul>
        </div>
        
	</script>
	
		
	<script type="text/template" id="page1">

        <div data-role="header">
            <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
            <img src="img/TwoGo_banner.png" id="banner" width="90%"/>
        </div>

        <div data-role="content">
            <p>This is Page 1. It was created dynamically using an underscore.js template.</p>
            <p>Navigate to:</p>
            <ul data-role="listview" data-inset="true" id="list">
                <li><a href="#">Home</a></li>
                <li><a href="#page2">Page 2</a></li>
            </ul>
        </div>

    </script>

    <script type="text/template" id="page2">

        <div data-role="header">
            <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
            <img src="img/TwoGo_banner.png" id="banner" />
            
        </div>

        <div data-role="content" id="venueinfo">
        <div id="map-canvas"> </div>
        </div>

    </script>

    
        <!--<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script> -->
    
    <script src="js/plugins.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    <script src="js/underscore.js"></script>
	<script src="js/backbone.js"></script>
	<script src="js/models/place.js"></script>
	<script src="js/route.js"></script>
    
    
    </body>
</html>